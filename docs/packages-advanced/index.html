<!DOCTYPE html><html lang="en">
<head>

<title>üì¶ Packages: advanced ‚Äî Pluto.jl</title>



<link rel="icon" href="../../assets/favicon.ico" />
<link rel="icon" href="../../assets/favicon.svg" type="image/svg+xml">

<link rel="stylesheet" href="../../assets/styles/index.css" type="text/css" />
<link rel="stylesheet" href="../../assets/styles/layout.css" type="text/css" />
<script src="../../assets/scripts/sidebar.js" type="module" defer></script>

<meta name="viewport" content="width=device-width"><meta charset="utf-8">
<meta name="pluto-insertion-spot-meta">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2a2928"><meta name="color-scheme" content="light dark"><link rel="pluto-logo-big" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/logo.004c1d7c.svg" integrity="sha384-GkQkODcGxsrSRJCkeakBXihum0GUM44cwBgKyutDimectXCbCgj6Vu3jlrueqEcN" crossorigin="anonymous"><link rel="pluto-logo-small" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/favicon_unsaturated.d1387b25.svg" integrity="sha384-omwjH+Qy3hpAVf5FYd/pkaDBuVAfsEDRN7eBxEA8Ek00OAWP+aiV+GpEYk3I7lyo" crossorigin="anonymous"><script type="module" src="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.a387c700.js" integrity="sha384-QIR9QyVw/4Jjo61jdv+/mCwdQswxAKPDEp9b4ZO4iitvft7o7DizyKCKnv5Z2gp5" crossorigin="anonymous"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/juliamono.a2a5b30d.css" integrity="sha384-w9GV7UZkK3QBeqyAZWUEUfw3PoTu18mc0hv4YHtsbAmJztljHyviMYTzE31mbfYz" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.788c1e24.css" integrity="sha384-bGPBGtFtuY1KS/k3oRzwU/6hfPY32D4Vzu7ZQfKhAD7zR3pUJIIh3TEvuLihoazw" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/vollkorn.089565a8.css" integrity="sha384-jnV/84VtSgBLF70H+s2rxJcOUZIMDR+X/ElFZA83i9ZtZSWiIMFAgPyrWkOJV08q" crossorigin="anonymous"><script defer="">console.log("Pluto.jl, by Fons van der Plas (https://github.com/fonsp), Miko≈Çaj Bochenski (https://github.com/malyvsen), Michiel Dral (https://github.com/dralletje) and friends üåà");</script><script src="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.4b96dd74.js" defer="" integrity="sha384-Y+UtWANyXLeovyghpAI8j9/VZXWboD6G5ZCckOsJO99PawAh/utJxFikf62WBaSu" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.9f9dc874.js" defer="" integrity="sha384-tkFo1EK72I9JvoTmHFa199dfRzW8mkXPUkHb/N7UhYI+bxKzX3Kh8LNCZz1ltsFF" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.90ede145.js" defer="" integrity="sha384-CuNU9gQg6fa/yynNqNWjHWzPm4nj+d7O6+HXsNGSqClhs/bYQIbBC3Lw/kh8Ukui" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.dbeed08a.js" defer="" integrity="sha384-1BEdQwXfZi4ZpsNV8w1X8pQcVK1/DS/+/M8OTo3gol7mdEspSN7nT6llX57NQCSt" crossorigin="anonymous"></script><script id="iframe-resizer-content-window-script" src="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.6386bd9d.js" crossorigin="anonymous" defer="" integrity="sha384-tgN2a0VDi/lCYwZuDqT7L+A/Y/9kpxf3HV7zv2BJ5Fu7zW0EClq0nM4crfK3TRPs"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.075ee715.css" type="text/css" integrity="sha384-hqbwrXJ9dt00K6fsAI13+k/R6U969j+h9PTMaI03ol9wpOksb/jCqcAXbL8cKqxQ" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.9fb5a9e0.css" type="text/css" media="all" data-pluto-file="hide-ui" integrity="sha384-7uAgyRtq5iffqlxCL5SnLdJGDJvclXx1F88O8PTht8UrVz9PXuytcPcxgxC6zeCQ" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.d3307b27.css" type="text/css" integrity="sha384-3x2qZDazgbcSpu1KwtC7K1OB1Tkfg6mRNoxs0wf+u5qGDUVfPW9p0dgiiuz/vnWq" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.e3402eb2.css" type="text/css" integrity="sha384-B+5EZ65SoErJCxHBqVwY2DKgNzKHjf/49SFYB2EfFS8GNvMy/aFGjAPMDiVq+QpM" crossorigin="anonymous"><link rel="preload" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/juliamono.a2a5b30d.css" as="style" integrity="sha384-w9GV7UZkK3QBeqyAZWUEUfw3PoTu18mc0hv4YHtsbAmJztljHyviMYTzE31mbfYz" crossorigin="anonymous"><link rel="preload" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/vollkorn.089565a8.css" as="style" integrity="sha384-jnV/84VtSgBLF70H+s2rxJcOUZIMDR+X/ElFZA83i9ZtZSWiIMFAgPyrWkOJV08q" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.e82e08bd.css" type="text/css" integrity="sha384-7YN+h8b6N4N65qk8TG/J2KPF95D8z3sGNd06rokz4CX9oWu0KnRAF5cVWu3BkkaN" crossorigin="anonymous"><script data-pluto-file="launch-parameters">
window.pluto_notebook_id = undefined;
window.pluto_isolated_cell_ids = undefined;
window.pluto_notebookfile = undefined;
window.pluto_disable_ui = true;
window.pluto_slider_server_url = undefined;
window.pluto_binder_url = "https://mybinder.org/v2/gh/fonsp/pluto-on-binder/v0.19.17";
window.pluto_statefile = undefined;
window.pluto_preamble_html = undefined;
</script>
<meta name="pluto-insertion-spot-parameters">
<script src="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.45b09910.js" type="module" defer="" integrity="sha384-BnqSVrLIFEu0cDIqFgzLnrGy3JypgUS8ubBkDshqqdOk7kiNFwPlD65Pc92kOZOd" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.19.17/frontend-dist/editor.b9f0ac7b.js" integrity="sha384-bgokkaJz2F/u6BCZYRcl36Jkfwy7x9SeobwBF3EWarMEaCfg5aSU3Z7nSuLQdETn" crossorigin="anonymous"></script><script type="text/javascript" id="MathJax-script" integrity="sha384-4kE/rQ11E8xT9QgrCBTyvenkuPfQo8rXYQvJZuMgxyPOoUfpatjQPlgdv6V5yhUK" crossorigin="" not-the-src-yet="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-svg-full.js" async=""></script>
</head>
<body>
    <div id="pages-layout">
        <button id="toggle-nav" title="Open navigation"></button>
        <nav id="pages-sidebar">
        <div>
        <ul>
            <li class="pluto_home_link"><a class="pluto_home_link" href='../..'><img src="../../assets/favicon.svg"><span> Pluto.jl</span></a>
            </li>
        <li>
<h3>Introduction</h3>
<ul>
<li class=''><a href='../../docs/'>üôã Introduction</a></li><li class=''><a href='../../docs/install/'>üåº How to install</a></li>
</ul>
</li>
<li>
<h3>Reproducibility</h3>
<ul>
<li class=''><a href='../../docs/packages/'>üì¶ Packages</a></li><li class='active'><a href='../../docs/packages-advanced/'>üì¶ Packages: advanced</a></li>
</ul>
</li>
<li>
<h3>Advanced: Widgets</h3>
<ul>

</ul>
</li>

        </ul>
        </div>
        </nav>
        <div id="pages-content">
        <div class="pages-markdown">
<main>
<h1 id="advanced-set-up-an-environment-with-pkgactivate"><a href="#advanced-set-up-an-environment-with-pkgactivate" class="anchor"></a>Advanced: set up an environment with <code>Pkg.activate</code></h1>
<p>Pluto‚Äôs package manager is enabled for all users, for ease of use and to promote reproducibility in scientific computing. There is no option to disable the behaviour <em>globally</em> (for your entire Pluto session). Instead, Pluto will detect notebooks that use <code>Pkg.activate</code> to set up an environment explicitly, and uses the old behaviour for those notebooks.</p>
<p>The philosophy here is that everyone should have a reproducible package environment <strong>by default</strong>, without having to do anything. This takes priority over other use cases, and hence <em>not</em> using the built-in package manager requires some extra work.</p>
<br>
<p><strong>Any notebook that calls <a href="https://pkgdocs.julialang.org/v1/api/#Pkg.activate"><code>Pkg.activate</code></a> will not use Pluto‚Äôs package management,</strong> and run in ‚Äòbackwards compatibility mode‚Äô. The <code>Pkg.activate</code> call should be placed directly in your notebook code: it is detecting using the same syntax analysis used for reactivity.</p>
<br>
<br>
<h2 id="pattern-the-global-environment"><a href="#pattern-the-global-environment" class="anchor"></a>Pattern: The ‚Äúglobal environment‚Äù</h2>
<p>If you do not intend on sharing a notebook file and you want to use your global package environment (called <code>(v1.6)</code> or similar, the one you get when you launch the Julia REPL), then you can call <code>Pkg.activate()</code> without any arguments.</p>
<blockquote>
<p>üôã If you are developing a package, then activating your global environment is an easy way to test your local version in Pluto.</p>
</blockquote>
<p>This ‚Äúglobal environment‚Äù pattern can be placed at the top of a notebook:</p>
<pre><code class="language-julia">begin
    import Pkg
    # careful: this is _not_ a reproducible environment
    # activate the global environment
    Pkg.activate()
<pre><code>using Plots, PlutoUI, LinearAlgebra
</code></pre>
<p>end
</code></pre></p>
<p>When running this in Pluto (try it out!), you will notice that the status marks next to packages disappear, and Pluto is running in ‚Äòbackwards compatibility mode‚Äô. Packages will no longer be installed or removed automatically, you have to use the Pkg REPL to do this yourself.</p>
<br>
<br>
<h2 id="pattern-the-shared-environment"><a href="#pattern-the-shared-environment" class="anchor"></a>Pattern: The ‚Äúshared environment‚Äù</h2>
<p>If you have multiple notebooks in a repository and you want to use share a Pkg environment between them, then you can call <code>Pkg.activate(path_to_environment)</code>. You can use <code>@__DIR__</code> to get the path of the notebook‚Äôs folder, and <code>joinpath(@__DIR__, &quot;..&quot;)</code> to get its parent, <code>joinpath(@__DIR__, &quot;..&quot;, &quot;..&quot;)</code> for the parent‚Äôs parent, etc.</p>
<p>The function <code>Base.current_project()</code> can be used to <strong>automatically</strong> find the closest parent directory that contains a <code>Project.toml</code>, in most cases this is what you want.</p>
<p>For example, if your project looks like this:</p>
<pre><code>my_project/
    data/
        ...
    notebooks/
        Interesting analysis.jl
        ...
    Project.toml
    Manifest.toml
    ...
</code></pre>
<p>then the ‚Äúshared environment‚Äù pattern can be placed at the top of a notebook:</p>
<pre><code class="language-julia">begin
    import Pkg
    # activate the shared project environment
    Pkg.activate(Base.current_project())
    # instantiate, i.e. make sure that all packages are downloaded
    Pkg.instantiate()
<pre><code>using Plots, PlutoUI, LinearAlgebra
</code></pre>
<p>end
</code></pre></p>
<p>When running this in Pluto, you will notice that the status marks next to packages disappear, and Pluto is running in ‚Äòbackwards compatibility mode‚Äô. Packages will no longer be installed or removed automatically, you have to use the Pkg REPL to do this yourself.</p>
<br>
<br>
<h2 id="pattern-the-pkg-cell"><a href="#pattern-the-pkg-cell" class="anchor"></a>Pattern: The ‚ÄúPkg cell‚Äù</h2>
<p>When adding packages, Pluto‚Äôs default package management will always install the latest version from the registry. If you need to install a specific version or branch of a package, or a package is not registered, you can use a ‚ÄúPkg cell‚Äù.</p>
<p>A common pattern is a so-called ‚ÄúPkg cell‚Äù, placed at the top of a notebook:</p>
<pre><code class="language-julia">begin
    import Pkg
    # activate a temporary environment
    Pkg.activate(mktempdir())
    Pkg.add([
        Pkg.PackageSpec(name=&quot;Plots&quot;, version=&quot;1&quot;),
        Pkg.PackageSpec(name=&quot;PlutoUI&quot;, version=&quot;0.7&quot;),
    ])
    using Plots, PlutoUI, LinearAlgebra
end
</code></pre>
<p>This will 1) activate a temporary environment using <code>Pkg.activate</code>, 2) add the required packages, 3) import them with <code>using</code>. When running this in Pluto (try it out!), you will notice that the status marks next to packages disappear, and Pluto is running in ‚Äòbackwards compatibility mode‚Äô. Packages will no longer be installed or removed automatically, you have to use the Pkg REPL to do this yourself.</p>
<p>Placing all code in a single <code>begin</code> block ensures that the lines will run in the correct order.</p>
<blockquote>
<p>üôã You can use <a href="https://fonsp.com/article-test-3/pkghelper.html">this helper tool</a> to generate a ‚ÄúPkg cell‚Äù automatically!</p>
</blockquote>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<h1 id="advanced-edit-the-notebook-environment"><a href="#advanced-edit-the-notebook-environment" class="anchor"></a>Advanced: edit the notebook environment</h1>
<p>Pluto.jl includes a helper function <code>Pluto.activate_notebook_environment</code> that activates a notebook Pkg environment in the REPL:</p>
<pre><code class="language-julia">julia&gt; import Pluto
<p>julia&gt; Pluto.activate_notebook_environment(&quot;~/Documents/hello.jl&quot;)</p>
<p>julia&gt; ]</p>
<p>(hello.jl) &gt; status
</code></pre></p>
<p>After activating a notebook environment, you can use the <a href="https://pkgdocs.julialang.org/v1/repl/">Pkg REPL</a> to view or modify the embedded environment. Changes from either side are synchronised (i.e. Pkg REPL changes are written to the notebook, editing the notebook updates the Pkg REPL env). Watch the demo video:</p>
<p>https://user-images.githubusercontent.com/6933510/111483040-b9c9ee80-8734-11eb-97bc-f51703fc57cc.mov</p>
</main>
</div>

        </div>
    </div>
</body>
</html>